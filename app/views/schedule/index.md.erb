# <%= Settings.schedule.title %>

<% c_id = 0 %>
<% @events.each_with_index do |event, idx| %>
  <% first = true %>
  <% if event.hidden %>
          <% next %>
      <% elsif (Settings.schedule.hide_unscheduled or event.kind == 'concert') and event.repetitions.empty? %>
          <% next %>
      <% end %>

<% if event.kind == 'concert' %>
    <% if @concerts and @concerts.include? event %>
        <% next %>
    <% end %>

    <% @concerts = consecutive_concerts(event) %>
<%= render 'concerts', c_id: c_id %>
    <% c_id += 1 %>
    <% next %>
<% end %>

## Δράση <%= idx %> <% if Settings.schedule.debug_indexes %>(#<%= event.id %>)<% end %>

**Όνομα Ομάδας**: <%= event.team %><%= '  ' %>
**Τίτλος Δράσης**: <%= event.title %><%= '  ' %>
  <% event.properties.each do |prop|  %>
**<%= prop.name %>**: <%= prop.value %><%= '  ' %>
  <% end %>
<% if event.space %>**Χώρος διεξαγωγής**: <%= event.space&.name %><%= '  ' %>
<% end %>**Είδος**: <%=  (event.kind || :other) %><%= '  ' %>
**Ημερομηνίες**:

    <% event.repetitions.each do |repetition| %>
  * <%= format_one_repetition repetition %><% if repetition.time? %>, <%= format_time repetition %><% end %><% if repetition.space_override %>, <%= repetition.space_override %><% end %>
    <% end %><%= ' ' %>

<%= (event.abstract || event.other).to_s.strip! %>

---------------
<% end %>
<% if Settings.schedule.show_unscheduled_concerts %>
    <% @concerts = Event.left_outer_joins(:repetitions).where(repetitions:{id:nil},kind:"concert") %>
    <%= render 'concerts', c_id: c_id %>
<% end %>
